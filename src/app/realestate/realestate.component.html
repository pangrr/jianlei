<mat-toolbar color="warn" class="fixed top font-normal" *ngIf="realestate">
  <mat-toolbar-row>
    <button mat-button>返回</button>
    <span>{{realestate.name}}</span>
    <button mat-button>地图找房</button>
  </mat-toolbar-row>
</mat-toolbar>

<mat-card class="horizontal-center" *ngIf="realestate">
  <slideshow [imageUrls]="images" [minHeight]="'350px'" [autoPlay]="true" [showDots]="true" [arrowSize]="'20px'"></slideshow>

  <mat-grid-list cols="2">
    <mat-grid-tile>
      <mat-card-content>
        <mat-card-title class="title">{{realestate.name}}</mat-card-title>
        <mat-card-subtitle>均价：<span class="red">{{realestate.price}}</span>元/平米</mat-card-subtitle>
        <mat-card-subtitle>开盘：<span class="black">在售中</span></mat-card-subtitle>
        <mat-card-subtitle>优惠折扣：<span class="black">新房红包</span></mat-card-subtitle>
        <mat-card-subtitle>地址：<span class="black">{{realestate.address}}</span></mat-card-subtitle>
      </mat-card-content>
    </mat-grid-tile>
    <mat-grid-tile>
      <mat-card-content>
        <mat-card-subtitle class="flex-wrap space-evenly background-red">
          <span>新房红包 抵扣房款</span>
          <span>新房红包{{realestate.redpocket.amount}}元</span>
          <button mat-button class="background-yellow" style="margin-top: 10px;" (click)="openCustomerRequestDialog('领取红包')">立即领取</button>
        </mat-card-subtitle>
        <mat-card-subtitle class="font-small">签约有效期：{{realestate.redpocket.startDate}} - {{realestate.redpocket.endDate}}</mat-card-subtitle>
        <mat-card-subtitle class="font-small">购房红包，数量有限，请尽快领取</mat-card-subtitle>
      </mat-card-content>
    </mat-grid-tile>
  </mat-grid-list>
  
  <mat-grid-list class="background-red" cols="2" rowHeight="100px">
    <mat-grid-tile>
      <mat-card-content>
        <mat-card-subtitle class="white">￥<span class="font-big">{{realestate.groupPrice}}</span> 团购价</mat-card-subtitle>
        <button class="background-yellow" mat-button (click)="openCustomerRequestDialog('团购看房')">预约团购看房</button>
      </mat-card-content>
    </mat-grid-tile>
    <mat-grid-tile>
      <mat-card-content>
        <mat-card-subtitle class="white">团购看房前参加有效</mat-card-subtitle>
        <mat-card-subtitle class="white">10天 12时 12分</mat-card-subtitle>
        <mat-card-subtitle class="white">120人参加</mat-card-subtitle>
      </mat-card-content>
    </mat-grid-tile>
  </mat-grid-list>


  <mat-card-content>
    <mat-card-subtitle class="black">售楼处：<span class="phone">{{realestate.phone}}</span><a href="tel:{{realestate.phone}}"><mat-icon svgIcon="phone"></mat-icon></a></mat-card-subtitle>
    <mat-card-subtitle>最新政策，更多优惠详情，请致电售楼处[120人拨打]</mat-card-subtitle>
  </mat-card-content>

  <mat-card-content *ngIf="realestate.consultant; let consultant">
    <mat-card-subtitle class="black">置业顾问：{{consultant.title}}<span class="phone">{{consultant.phone}}</span><a href="tel:{{consultant.phone}}"><mat-icon svgIcon="phone"></mat-icon></a></mat-card-subtitle>
    <mat-card-subtitle>{{consultant.description}}</mat-card-subtitle>
  </mat-card-content>
    
  <mat-card-content>
    <mat-card-subtitle class="title">楼盘信息</mat-card-subtitle>
    <p class="indent" *ngFor="let paragraph of description">
      {{paragraph}}
    </p>
  </mat-card-content>

  <mat-card-content *ngIf="realestate.visitServices; let services">
    <mat-card-subtitle class="title">楼盘服务</mat-card-subtitle>
    <mat-card-subtitle class="flex"><button class="service-button" color="warn" (click)="openCustomerRequestDialog('班车看房')" mat-raised-button>班车看房</button><span>{{services.taxi}}</span></mat-card-subtitle>
    <mat-card-subtitle class="flex"><button class="service-button" color="warn" (click)="openCustomerRequestDialog('自驾报销')" mat-raised-button>自驾报销</button><span>{{services.reimburse}}</span></mat-card-subtitle>
  </mat-card-content>

  <mat-card-content>
    <mat-card-subtitle class="title">卫星地图</mat-card-subtitle>
  </mat-card-content>

  <mat-card-content>
    <mat-card-subtitle class="title">用户点评(232)</mat-card-subtitle>
  </mat-card-content>

  <mat-card-content *ngFor="let comment of realestate.comments">
    <mat-card-subtitle class="black"><mat-icon svgIcon="account"></mat-icon><span class="blue">{{comment.account}}</span></mat-card-subtitle>
    <p class="comment">{{comment.text}}</p>
    <mat-card-subtitle class="comment">{{comment.date}}</mat-card-subtitle>
  </mat-card-content>

  <mat-card-content>
    <mat-card-subtitle class="title">周边楼盘</mat-card-subtitle>
  </mat-card-content>

  <a *ngFor="let r of relatedRealestates" [routerLink]="['/realestate', r._id]" target="_blank">
    <mat-grid-list class="related-realestate clickable" cols="3" rowHeight="100px">
      <mat-grid-tile colspan="1">
        <img class="thumbnail-image" [src]="r.imageUrl">
      </mat-grid-tile>
      <mat-grid-tile colspan="2">
        <mat-card-content>
          <mat-card-subtitle class="black">{{r.name}}</mat-card-subtitle>
          <mat-card-subtitle>{{r.address}}</mat-card-subtitle>
          <mat-card-subtitle class="red">均价{{r.price}}元/平米</mat-card-subtitle>
        </mat-card-content>
      </mat-grid-tile>
    </mat-grid-list>
  </a>
  

  <mat-toolbar-row></mat-toolbar-row>
</mat-card>


<mat-toolbar class="fixed bottom" *ngIf="realestate">
  <mat-toolbar-row>
    <button color="warn" mat-button (click)="openCustomerRequestDialog('预约看房')">预约看房</button>
    <button color="warn" mat-button (click)="openCustomerRequestDialog('领取红包')">新房红包</button>
    <button color="warn" mat-button (click)="openCustomerRequestDialog('预约团购看房')">团购看房</button>
    <a href="tel:{{realestate.phone}}"><button color="warn" mat-button>售楼热线</button></a>
  </mat-toolbar-row>
</mat-toolbar>

<div *ngIf="images && showFullscreenImages" style="z-index: 999;position: fixed;top: 0;left: 0;width: 100%;height: 100%;background-color: black;">
  <button mat-button style="color: white;position: fixed;right: 0;" (click)="showFullscreenImages = false">返回</button>
  <div style="position: absolute;top: 50%;left: 50%;width: 100%;height: 500px;margin-top: -250px;margin-left: -50%;">
    <slideshow #fullscreenSlideshow [imageUrls]="images" [autoPlay]="false" [showDots]="true" [arrowSize]="'20px'"></slideshow>
  </div>
</div>
